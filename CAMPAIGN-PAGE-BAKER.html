<!DOCTYPE html>
<html lang='en'>
<head>
<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0'>
<title>Community Bakery - ₱1Solution Campaign</title>
<style>
  *{margin:0; padding:0; box-sizing:border-box;}

  body{
    font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background:#f4f7fa;
    color:#333;
    line-height:1.6;
  }

  header{
    background:#fff;
    box-shadow:0 2px 10px rgba(0,0,0,.1);
    position:sticky;
    top:0;
    z-index:100;
  }
  .header-content{
    max-width:1800px;
    margin:auto;
    padding:15px 20px;
    display:flex;
    justify-content:space-between;
    align-items:center;
  }
  nav ul{display:flex; gap:20px; list-style:none;}
  nav a{
    text-decoration:none;
    color:#555;
    font-weight:500;
    cursor:pointer;
  }
  nav a:hover{color:#2c5aa0;}
  .logo img{
    width:180px;
    cursor:pointer;
  }

  .layout{
    max-width:1800px;
    margin:30px auto;
    display:flex;
    gap:30px;
  }
  .left-column{flex:2;}
  .right-column{
    flex:1;
    background:#fff;
    padding:20px;
    border-radius:8px;
    box-shadow:0 2px 10px rgba(0,0,0,.1);
    height:fit-content;
  }

  .campaign-img{
    width:100%;
    border-radius:8px;
    margin-bottom:15px;
    object-fit:cover;
    object-position:center;
    height:300px;
  }

  .campaign-title{
    text-align:center;
    color:#2c5aa0;
    margin-bottom:10px;
    font-size:2em;
  }

  .progress-box{
    margin:10px 0;
    padding:10px;
    background:#f4f7fa;
    border-radius:6px;
  }

  .progress-bar{
    background:#ddd;
    height:10px;
    border-radius:4px;
    overflow:hidden;
  }

  .progress-fill{
    background:#4a90e2;
    height:100%;
    width:0%;
    transition:width .4s ease;
  }

  .coin-btn{
    width:110px;
    height:110px;
    background:url('../Images/piso.jfif');
    background-size:cover;
    background-position:center;
    border:none;
    cursor:pointer;
    margin:auto;
    display:block;
    transition:transform .2s;
  }
  .coin-btn:hover{
    transform:scale(1.1);
  }

  .coin-falling {
    animation: coinFall 1.5s ease-out;
  }

  @keyframes coinFall {
    0% { transform: translateY(0); opacity: 1; }
    100% { transform: translateY(200px); opacity: 0; }
  }

  .creator-box {
    background: #ffffff;
    border: 3px solid #2c5aa0;
    border-radius: 12px;
    padding: 20px;
    margin-top: 30px;
    display: block !important;
    width: 100% !important;
    box-shadow: 0 0 15px rgba(0,0,0,0.15);
  }

  .creator-box-content {
    display: flex;
    align-items: center;
    gap: 15px;
  }

  .creator-photo {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    border: 3px solid #2c5aa0;
    object-fit: cover;
  }

  .story-box{
    background:#fff;
    padding:20px;
    border-radius:8px;
    box-shadow:0 2px 10px rgba(0,0,0,.1);
    margin-bottom:20px;
  }

  .donation-list{margin-top:15px;}
  .donation-entry{
    background:#fff;padding:10px;
    border-radius:5px;
    display:flex;
    justify-content:space-between;
    margin-bottom:10px;
    box-shadow:0 1px 4px rgba(0,0,0,.05);
  }

  .modal{
    display:none;
    position:fixed;
    left:0;top:0;
    width:100%;
    height:100%;
    justify-content:center;
    align-items:center;
    background:rgba(0,0,0,.5);
    z-index:999;
  }

  .modal-content {
    background: #fff;
    border-radius: 8px;
    width: 90%;
    max-width: 400px;
    padding: 20px;
    position: relative;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
  }

  .close{
    position:absolute; 
    right:15px;top:10px; 
    font-size:24px; 
    cursor:pointer;}
  .tab-buttons{
    display:flex; 
    margin-bottom:20px;
  }
  .tab-btn{
    flex:1; 
    padding:10px; 
    border:none; 
    background:#eee; 
    font-weight:bold; 
    cursor:pointer;
  }
  .tab-btn.active{
    background:#2c5aa0; 
    color:#fff;
  }
  .tab-content{
    display:none;
  }
  .tab-content.active{
    display:block;
  }
  .form-group{
    margin-bottom:15px;
  }
  .form-group input{
    width:100%; 
    padding:10px; 
    border:1px solid:#ddd; 
    border-radius:4px;
  }
  .modal-btn{
    width:100%; 
    padding:12px; 
    background:#2c5aa0; 
    color:#fff; 
    border:none; 
    border-radius:4px; 
    font-weight:bold; 
    margin-top:10px; 
    cursor:pointer;
  }

  .sidebar {
    position: fixed; 
    top: 0; 
    right: -350px; 
    width: 300px; 
    height: 100%; 
    background: #fff; 
    box-shadow: -2px 0 10px rgba(0,0,0,0.2); 
    padding: 20px; 
    transition: right 0.3s; 
    z-index: 2000;
  }
  .sidebar.open {
    right: 0;
  }
  .close-sidebar {
    position: absolute; 
    top: 10px; 
    right: 15px; 
    font-size:24px; 
    cursor:pointer;
  }
  @media(max-width:900px){.layout{flex-direction:column;}}

  /* Table styles with rounded cells */
  table {
    width: 100%;
    margin-bottom: 20px;
    border-collapse: separate;   /* allow border-radius */
    border-spacing: 0 1px;       /* small vertical spacing between rows */
    border-radius: 5px;          /* overall table rounding */
  }
  .my-table th,
  table td {
    border: 2px solid #2c5aa0;
    border-radius: 12px;         /* rounded corners for cells */
    padding: 8px;
  }
  table th {
    background:#2c5aa0 ;
    color: white;
  }

  footer{
    margin-top:50px;
    background:#2c5aa0;
    color:#fff;
    text-align:center;
    padding:20px;
  }

  .nav-img-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 50px;
    height: 50px;
    padding: 12px !important;
    border-radius: 8px;
    transition: all 0.3s ease;
    text-decoration: none;
  }

  .nav-img-icon img {
    width: 28px;
    height: 28px;
    object-fit: contain;
  }

  .nav-img-icon:hover {
    background: rgba(74, 144, 226, 0.1);
    transform: scale(1.1);
    color: #2c5aa0 !important;
  }
</style>
</head>
<body>

<header>
  <div class='header-content'>
    <div class='logo'><img src='../Images/logo.jfif' id='logo-click'></div>
    <nav>
      <ul>
        <li>
          <a href="../HOMEPAGE.html" class="nav-img-icon" title="Home">
            <img src="../Images/home-icon.png" alt="Home">
          </a>
        </li>
        <li>
          <a href="#featured" class="nav-img-icon" title="Featured">
            <img src="../Images/featured-icon.png" alt="Featured Campaigns">
          </a>
        </li>
        <li>
          <a href="#" id="auth-link" class="nav-img-icon" title="Account">
            <img src="../Images/account-icon.png" alt="Login/Register">
          </a>
        </li>
      </ul>
    </nav>

  </div>
</header>

<div class='layout'>
  <div class='left-column'>
    <img src='../Images/bakery.jpg' class='campaign-img' alt="Bakery Improvements">

    <div class='story-box'>
      <h2>Story</h2>
      <p>
      Our community bakery began as a small weekend passion project—just a single oven, a table, and a mission to bring freshly baked bread to neighbors who rarely had access to affordable, quality pastries. Over time, more people began visiting, asking for pandesal in the mornings, soft ensaymada for merienda, and affordable loaf bread for their families. This little bakery became more than a business; it became a place where people could gather, talk, and feel at home. The warmth of the bread started reflecting the warmth of the community itself.
      <br><br>
      Now, demand has grown beyond what our current small setup can handle. Parents ask for larger batches, students stop by for budget-friendly snacks, and residents rely on us for fresh bread every morning. To keep serving our growing community—and to improve the quality and consistency of what we make—we’re launching this campaign to expand and upgrade our humble bakery into something that can truly uplift the neighborhood.
      </p>

      <h3 style="margin-top:18px;color:#2c5aa0;">What is the campaign about?</h3>
      <p>
        This campaign is about helping a small community bakery upgrade its equipment, increase production, and create a welcoming space for locals. By supporting the project, you’re helping maintain an affordable food source for families, giving young people a safe place to gather, and preserving homemade Filipino baking traditions.
      </p>

      <h3 style="margin-top:18px;color:#2c5aa0;">What will you do with the funds? (₱15,000 Budget)</h3>
      <table class="my-table" aria-label="Funding breakdown">
        <thead>
          <tr>
            <th>Item</th>
            <th>Cost</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Upgraded baking tools (mixers, baking trays, small scale equipment)</td>
            <td>₱4,500</td>
          </tr>
          <tr>
            <td>Bulk ingredients (flour, sugar, butter, yeast, fillings)</td>
            <td>₱3,500</td>
          </tr>
          <tr>
            <td>Oven repairs and maintenance</td>
            <td>₱3,000</td>
          </tr>
          <tr>
            <td>Interior improvements (shelves, countertop repairs, minor electrical)</td>
            <td>₱2,000</td>
          </tr>
          <tr>
            <td>Packaging materials (boxes, paper, labels)</td>
            <td>₱2,000</td>
          </tr>
          <tr>
            <td style="font-weight:700;">Total</td>
            <td style="font-weight:700;">₱15,000</td>
          </tr>
        </tbody>
      </table>

      <h3 style="margin-top:12px;color:#2c5aa0;">Where will it be located?</h3>
      <p>
        The bakery will be located in Dasmariñas, Cavite — a growing residential community where many families and students pass by daily and would directly benefit from affordable, high-quality baked goods.
      </p>
    </div>
  </div>

  <div class='right-column'>
    <h2 class='campaign-title'>Community Bakery</h2>
    <div class='progress-box'>
      <strong id='raised-label'>₱0 raised of ₱15,000 goal</strong>
      <div class='progress-bar'>
        <div class='progress-fill' id='fill' role="progressbar" aria-valuemin="0" aria-valuemax="15000"></div>
      </div>
    </div>

    <button id='donate-btn' class='coin-btn' title="Donate ₱1"></button>

    <div class='donation-list' id='donation-list'>
      <h3 style='margin-top:15px;color:#2c5aa0;'>Recent Donators</h3>
    </div>

    <div class="author-box">
      <div class="creator-box">
        <h3>Campaign Creator</h3>
        <div class="creator-box-content">
          <img src="../Images/profile.jpg" class="creator-photo" alt="Creator photo">
          <div>
            <p><strong>Name:</strong> Rafael Gomez</p>
            <p><strong>Email:</strong> rafael.gomez@example.com</p>
            <p><strong>About:</strong> Passionate baker aiming to bring community together through bread and pastries.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<footer>
  ₱1Solution • All Rights Reserved.
</footer>

<!-- Modal -->
<div id='auth-modal' class='modal'>
  <div class='modal-content'>
    <span class='close'>&times;</span>
    <div class='tab-buttons'>
      <button class='tab-btn active' onclick='showTab("login")'>Login</button>
      <button class='tab-btn' onclick='showTab("register")'>Register</button>
    </div>
    <div id='login' class='tab-content active'>
      <div class='form-group'><input type='email' id='login-email' placeholder='Email'></div>
      <div class='form-group'><input type='password' placeholder='Password'></div>
      <button class='modal-btn' id='login-submit'>Login</button>
    </div>
    <div id='register' class='tab-content'>
      <div class='form-group'><input type='text' id='register-name' placeholder='Full Name'></div>
      <div class='form-group'><input type='email' id='register-email' placeholder='Email'></div>
      <div class='form-group'><input type='password' placeholder='Password'></div>
      <button class='modal-btn' id='register-submit'>Register</button>
    </div>
  </div>
</div>

<!-- SIDEBAR -->
<div id='account-sidebar' class='sidebar'>
  <span class='close-sidebar'>&times;</span>
  <h2>Account Information</h2>
  <p><strong>Name:</strong> <span id='acc-name'></span></p>
  <p><strong>Email:</strong> <span id='acc-email'></span></p>
  <button id='logout-btn' class='modal-btn' style='background:red;'>Logout</button>
</div>


<script>
// Consolidated script for Laundry campaign — defensive, single init, per-campaign keys.
  (function(){
    const campaignID = 'baker';
    const CAMPAIGN_KEY = `campaign-${campaignID}_raised`;
    const CAMPAIGN_GOAL_KEY = `campaign-${campaignID}_goal`;

    // NAV
    const authLink = document.getElementById('auth-link');
    const homeLink = document.getElementById('home-link');
    const browseLink = document.getElementById('browse-link');
    const logoClick = document.getElementById('logo-click');

    if (homeLink) homeLink.onclick = () => { window.location.href = '../HOMEPAGE.html'; };
    if (logoClick) logoClick.onclick = () => { window.location.href = '../HOMEPAGE.html'; };
    if (browseLink) browseLink.onclick = () => { window.location.href = '../HOMEPAGE.html#featured'; };

    // STATE
    let amountRaised = 3972 ;
    let goalAmount = parseInt(localStorage.getItem(CAMPAIGN_GOAL_KEY)) || 15000;


    // ELEMENTS
    const modal = document.getElementById('auth-modal');
    const donate = document.getElementById('donate-btn');
    const closeBtn = document.querySelector('.close');
    const sidebar = document.getElementById('account-sidebar');
    const accName = document.getElementById('acc-name');
    const accEmail = document.getElementById('acc-email');
    const donationList = document.getElementById('donation-list');
    const fillEl = document.getElementById('fill');

    // DONATE
    if (donate) {
      donate.addEventListener('click', (e) => {
        e.preventDefault();
        if (!localStorage.getItem('userEmail')) {
          if (modal) modal.style.display = 'flex';
          return;
        }
        const user = localStorage.getItem('userName') || 'Anonymous';
        addDonation(user, 1);
        donate.classList.add('coin-falling');
        setTimeout(() => donate.classList.remove('coin-falling'), 1500);
      });
    }

    // CLOSE HANDLERS
    if (closeBtn) closeBtn.addEventListener('click', () => { if (modal) modal.style.display = 'none'; });
    window.addEventListener('click', (e) => { if (e.target === modal && modal) modal.style.display = 'none'; });

    // Tabs
    window.showTab = function(name, btn) {
      document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
      const tab = document.getElementById(name);
      if (tab) tab.classList.add('active');
      if (btn) btn.classList.add('active');
    };

    // LOGIN / REGISTER
    function saveUser(name, email) {
      localStorage.setItem('userName', name);
      localStorage.setItem('userEmail', email);
      updateNav();
    }

    const loginSubmit = document.getElementById('login-submit');
    if (loginSubmit) loginSubmit.addEventListener('click', () => {
      const email = document.getElementById('login-email')?.value || '';
      saveUser('User', email);
      if (modal) modal.style.display = 'none';
    });

    const registerSubmit = document.getElementById('register-submit');
    if (registerSubmit) registerSubmit.addEventListener('click', () => {
      const name = document.getElementById('register-name')?.value || 'User';
      const email = document.getElementById('register-email')?.value || '';
      saveUser(name, email);
      if (modal) modal.style.display = 'none';
    });

    // SIDEBAR ACCOUNT
    if (authLink) authLink.addEventListener('click', (e) => {
      e.preventDefault();
      if (localStorage.getItem('userEmail')) {
        accName.textContent = localStorage.getItem('userName') || '';
        accEmail.textContent = localStorage.getItem('userEmail') || '';
        if (sidebar) sidebar.classList.add('open');
      } else {
        if (modal) modal.style.display = 'flex';
      }
    });

    document.querySelectorAll('.close-sidebar').forEach(el => el.addEventListener('click', () => { if (sidebar) sidebar.classList.remove('open'); }));
    const logoutBtn = document.getElementById('logout-btn');
    if (logoutBtn) logoutBtn.addEventListener('click', () => {
      localStorage.removeItem('userName');
      localStorage.removeItem('userEmail');
      if (sidebar) sidebar.classList.remove('open');
      updateNav();
    });

    function updateNav() {
      if (!authLink) return;
      
      if (localStorage.getItem('userEmail')) {
        // Logged in - show account image
        authLink.innerHTML = '<img src="../Images/my-account-icon.png" alt="My Account" class="nav-account-img">';
        authLink.title = 'My Account';
      } else {
        // Not logged in - show login image  
        authLink.innerHTML = '<img src="../Images/login-icon.png" alt="Login/Register" class="nav-login-img">';
        authLink.title = 'Login/Register';
      }
    }

    updateNav();

    // DONATION SYSTEM
    function renderDonations(donations) {
      if (!donationList) return;
      donationList.innerHTML = `<h3 style='margin-top:15px;color:#2c5aa0;'>Recent Donators</h3>`;
      for (let [name, amount] of Object.entries(donations)) {
        const div = document.createElement('div');
        div.className = 'donation-entry';
        div.innerHTML = `<span>${name}</span><span>₱${amount}</span>`;
        donationList.append(div);
      }
    }

    function addDonation(name, amount) {
      let donations = JSON.parse(localStorage.getItem(`donations_${campaignID}`)) || {};
      donations[name] = (donations[name] || 0) + amount;
      localStorage.setItem(`donations_${campaignID}`, JSON.stringify(donations));
      amountRaised = Object.values(donations).reduce((a, b) => a + b, 3972);
      renderDonations(donations);
      updateGoal();
      localStorage.setItem(CAMPAIGN_KEY, String(amountRaised));
      localStorage.setItem(CAMPAIGN_GOAL_KEY, String(goalAmount));
    }

    function updateGoal() {
      const label = document.getElementById('raised-label');
      if (label) label.textContent = `₱${amountRaised} raised of ₱${goalAmount} goal`;
      if (fillEl) fillEl.style.width = Math.min(100, (amountRaised / goalAmount) * 100) + '%';
      localStorage.setItem(CAMPAIGN_KEY, String(amountRaised));
      localStorage.setItem(CAMPAIGN_GOAL_KEY, String(goalAmount));
      localStorage.setItem('progress_' + campaignID, String(amountRaised));
    }

    // INIT
    (function init(){
      let saved = JSON.parse(localStorage.getItem(`donations_${campaignID}`));
      if (!saved || Object.keys(saved).length === 0) {
        const filler = {"Carlito":14,"Rhian":30,"Vince":9};
        localStorage.setItem(`donations_${campaignID}`, JSON.stringify(filler));
        saved = filler;
      }
      renderDonations(saved);
      amountRaised = Object.values(saved).reduce((a, b) => a + b, 3972);
      updateGoal();
    })();

  })();
</script>


</body>
</html>
